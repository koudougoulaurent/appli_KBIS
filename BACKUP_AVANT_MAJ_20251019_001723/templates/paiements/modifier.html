{% extends 'base.html' %}

{% block title %}Modifier le Paiement{% endblock %}

{% block content %}
<div class="container-fluid">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1 class="h3 mb-0">
            <i class="bi bi-pencil"></i> Modifier le Paiement
        </h1>
        <a href="{% url 'paiements:detail' paiement.pk %}" class="btn btn-secondary">
            <i class="bi bi-arrow-left"></i> Retour au détail
        </a>
    </div>

    <div class="card">
        <div class="card-header">
            <h5 class="mb-0">{{ paiement.reference_paiement }}</h5>
        </div>
        <div class="card-body">
            <form method="post">
                {% csrf_token %}
                <div class="row">
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label for="contrat" class="form-label">Contrat</label>
                            <select class="form-select" id="contrat" name="contrat" required>
                                {% for contrat in contrats %}
                                    <option value="{{ contrat.id }}" {% if contrat.id == paiement.contrat.id %}selected{% endif %}>
                                        {{ contrat.numero_contrat }} - {{ contrat.propriete.adresse }}
                                    </option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="montant" class="form-label">Montant (F CFA)</label>
                            <input type="number" step="0.01" class="form-control" id="montant" name="montant" 
                                   value="{{ paiement.montant }}" required>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label for="date_paiement" class="form-label">Date de paiement</label>
                            <input type="date" class="form-control" id="date_paiement" name="date_paiement" 
                                   value="{{ paiement.date_paiement|date:'Y-m-d' }}" required>
                        </div>
                        <div class="mb-3">
                            <label for="methode_paiement" class="form-label">Méthode de paiement</label>
                            <select class="form-select" id="methode_paiement" name="methode_paiement" required>
                                <option value="virement" {% if paiement.methode_paiement == 'virement' %}selected{% endif %}>Virement</option>
                                <option value="cheque" {% if paiement.methode_paiement == 'cheque' %}selected{% endif %}>Chèque</option>
                                <option value="especes" {% if paiement.methode_paiement == 'especes' %}selected{% endif %}>Espèces</option>
                                <option value="carte" {% if paiement.methode_paiement == 'carte' %}selected{% endif %}>Carte bancaire</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="text-end">
                    <button type="submit" class="btn btn-primary">
                        <i class="bi bi-check-circle"></i> Modifier
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}